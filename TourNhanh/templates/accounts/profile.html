{% extends 'base.html' %}

{% block title %}Thông tin cá nhân - Du Lịch Việt{% endblock %}

{% block content %}
<div class="page-header">
    <div class="container">
        <h1 class="display-4">Thông tin cá nhân</h1>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'core:home' %}" class="text-white">Trang chủ</a></li>
                <li class="breadcrumb-item active text-white" aria-current="page">Thông tin cá nhân</li>
            </ol>
        </nav>
    </div>
</div>

<section class="py-5">
    <div class="container">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-lg-3 mb-4 mb-lg-0">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">Tài khoản của tôi</h5>
                    </div>
                    <div class="list-group list-group-flush">
                        <a href="{% url 'accounts:profile' %}" class="list-group-item list-group-item-action active">
                            <i class="fas fa-user me-2"></i> Thông tin cá nhân
                        </a>
                        <a href="{% url 'bookings:booking_history' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-history me-2"></i> Lịch sử đặt tour
                        </a>
                        <a href="{% url 'accounts:change_password' %}" class="list-group-item list-group-item-action">
                            <i class="fas fa-lock me-2"></i> Đổi mật khẩu
                        </a>
                        <a href="{% url 'accounts:logout' %}" class="list-group-item list-group-item-action text-danger">
                            <i class="fas fa-sign-out-alt me-2"></i> Đăng xuất
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="col-lg-9">
                <div class="card mb-4">
                    <div class="card-header">
                        <h4 class="mb-0">Cập nhật thông tin cá nhân</h4>
                    </div>
                    <div class="card-body">
                        <form method="post" action="{% url 'accounts:profile' %}">
                            {% csrf_token %}
                            
                            <h5 class="mb-3">Thông tin tài khoản</h5>
                            <div class="row mb-4">
                                <div class="col-md-6 mb-3">
                                    <label for="{{ user_form.first_name.id_for_label }}" class="form-label">Tên</label>
                                    {{ user_form.first_name }}
                                    {% if user_form.first_name.errors %}
                                        <div class="text-danger">{{ user_form.first_name.errors.0 }}</div>
                                    {% endif %}
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="{{ user_form.last_name.id_for_label }}" class="form-label">Họ</label>
                                    {{ user_form.last_name }}
                                    {% if user_form.last_name.errors %}
                                        <div class="text-danger">{{ user_form.last_name.errors.0 }}</div>
                                    {% endif %}
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="{{ user_form.email.id_for_label }}" class="form-label">Email</label>
                                    {{ user_form.email }}
                                    {% if user_form.email.errors %}
                                        <div class="text-danger">{{ user_form.email.errors.0 }}</div>
                                    {% endif %}
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Tên đăng nhập</label>
                                    <input type="text" class="form-control" value="{{ user.username }}" disabled>
                                    <div class="form-text">Tên đăng nhập không thể thay đổi</div>
                                </div>
                            </div>
                            
                            <h5 class="mb-3">Thông tin liên hệ</h5>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="{{ profile_form.phone.id_for_label }}" class="form-label">Số điện thoại</label>
                                    {{ profile_form.phone }}
                                    {% if profile_form.phone.errors %}
                                        <div class="text-danger">{{ profile_form.phone.errors.0 }}</div>
                                    {% endif %}
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="{{ profile_form.date_of_birth.id_for_label }}" class="form-label">Ngày sinh</label>
                                    {{ profile_form.date_of_birth }}
                                    {% if profile_form.date_of_birth.errors %}
                                        <div class="text-danger">{{ profile_form.date_of_birth.errors.0 }}</div>
                                    {% endif %}
                                </div>
                                <div class="col-md-12 mb-3">
                                    <label for="{{ profile_form.address.id_for_label }}" class="form-label">Địa chỉ</label>
                                    {{ profile_form.address }}
                                    {% if profile_form.address.errors %}
                                        <div class="text-danger">{{ profile_form.address.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            
                            <div class="text-end">
                                <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <div class="alert alert-info">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-info-circle fa-2x me-3"></i>
                        <div>
                            <h5 class="alert-heading">Bảo mật tài khoản</h5>
                            <p class="mb-0">Để đảm bảo tài khoản của bạn luôn an toàn, chúng tôi khuyến nghị bạn thay đổi mật khẩu định kỳ và không chia sẻ thông tin đăng nhập với người khác.</p>
                            <a href="{% url 'accounts:change_password' %}" class="btn btn-outline-primary mt-2">Đổi mật khẩu</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
